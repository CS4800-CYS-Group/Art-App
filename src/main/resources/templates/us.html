<!DOCTYPE html>
<html lang="en"
  xmlns:th="http://www.thymeleaf.org"
>
  <head>
    <title>User Page </title>

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/design.css" rel="stylesheet">
    <!-- Google Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
  <!--Icon-->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  </head>
  <body>
    <nav class="navbar navbar-expand-md navbar-dark">
        <a class="navbar-brand" href="/home" ><span class="material-symbols-rounded">home</span></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
    
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
              <a class="nav-link" href="#"><span class="material-symbols-rounded">notifications</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"><span class="material-symbols-rounded">mail</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"><span class="material-symbols-rounded">bookmark</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/browse"><span class="material-symbols-rounded">person</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"><span class="material-symbols-rounded">logout</span></a>
            </li>
          </ul>
    
          <form class="navbar-form navbar-left" action="/action_page.php">
            <div class="input-group">
              <input type="text" class="form-control" placeholder="Search">
              <div class="input-group-btn">
                <button type="button" class="btn btn-secondary">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                  </svg>
                </button>
              </div>
            </div>
          </form>
        </div>
      </nav>
    <h1 th:text="${welcomeMessage}"></h1>
    <div th:if="${isUser == true}">
        <img th:if="${user.profilePicture != null}" th:src="@{/us/{username}/profile-picture(username=${user.username})}" style="width: 200px; height: 200px;"alt="Profile Picture" />
	    <p>Here are some options for managing your account:</p>
	    <ul>
	      <li><a href="/change-password">Change Password</a></li>
	      <li><form method="POST" enctype="multipart/form-data" th:action="@{/us/{username}/saveProfilePicture(username=${username})}">
            <input type="file" name="profilePicture" accept="image/*">
            <button type="submit">Save Profile Picture</button>
          </form>
          </li>
	      <li><a href="/logout">Logout</a></li>
	    </ul>
	    
	    <form th:action="@{/us/{username}/photos/upload(username=${username})}" method="post" enctype="multipart/form-data">
	        <input type="file" name="file" required />
	        <input type="text" name="title" placeholder="Title" required />
	        <input type="text" name="description" placeholder="Description" required />
	        <button type="submit">Upload</button>
	    </form>
      <h3>Following:</h3>
<ul>
    <li th:each="followedUser : ${following}">
        <a th:href="@{/us/{username}(username=${followedUser.getUsername()})}"
           th:text="${followedUser.getUsername()}"></a>
    </li>
</ul>

	</div>
    <div>
        <form th:action="@{/us/{username}/follow(username=${username})}" method="post">
            <button type="submit">Follow</button>
        </form>
        <form th:action="@{/us/{username}/unfollow(username=${username})}" method="post">
            <button type="submit">Unfollow</button>
        </form>
    </div>

    <div th:each="photo : ${photos}">
      <img th:src="@{'/photos/' + ${photo.id}}" />
      <div th:text="${photo.title}" />
      <div th:text="${photo.description}" />
  </div>  
  </body>
</html>
